<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core">


<h:head>
    <title>Komis</title>
</h:head>
<h:body>
    <h:form>
        <h:selectOneMenu value="#{Komis.carMark}" required="true">
            <f:selectItem itemLabel="Select Mark" itemValue="-1" />
            <f:selectItems value="#{Komis.carMarks}" var="marks" itemLabel="#{marks}" itemValue="#{marks}"/>
            <f:ajax render="CARMODELS" listener="#{Komis.loadModels}"/>
        </h:selectOneMenu>
        <br/>
        <h:selectOneMenu id="CARMODELS" value="#{Komis.carModel}">
            <f:selectItem itemLabel="Select Model" itemValue="-1" />
            <f:selectItems value="#{Komis.carModels}" var="models" itemLabel="#{models}" itemValue="#{models}"/>
            <f:ajax execute="@this"/>
        </h:selectOneMenu>
        <br/>
        Price from:<h:inputText value="#{Komis.from}" required="true"/>
        <br/>
        Price to:<h:inputText value="#{Komis.to}" required="true"/>
        <br/>
        <h:selectOneMenu value="#{Komis.engine}" required="true">
            <f:selectItem itemLabel="Select Engine" itemValue="-1" />
            <f:selectItem itemLabel="Benzine" itemValue="Benzine" />
            <f:selectItem itemLabel="ON" itemValue="ON" />
            <f:selectItem itemLabel="Gas" itemValue="Gas" />
            <f:selectItem itemLabel="Electric" itemValue="Electric"/>
            <f:ajax execute="@this"/>
        </h:selectOneMenu>
        <br/>
        Name:<h:inputText value="#{Komis.name}" required="true">
                <f:ajax execute="@this"/>
            </h:inputText>
        <br/>
        Email:<h:inputText value="#{Komis.email}" required="true">
                <f:ajax execute="@this"/>
            </h:inputText>
        <br/>

    </h:form>
    <h:form>
        <h:commandButton value="Check">
            <f:ajax render="@all" event="click" execute="@this"  listener="#{Komis.loadCars}" />
        </h:commandButton>
        <ul id="list">
            <ui:repeat value="#{Komis.cars_aviable}" var="car">
                        <li>
                            Mark: "#{car.mark}"<br/>
                            Model: "#{car.model}"<br/>
                            Price: "#{car.price}<br/>
                        </li>
            </ui:repeat>
        </ul>
    </h:form>
</h:body>
</html>